% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/kiWisConnect.R
\name{get_kiwis_meta}
\alias{get_kiwis_meta}
\title{Retrieve KIWIS Station Metadata from an Experiment Hub}
\usage{
get_kiwis_meta(
  hub,
  dataType = NULL,
  return_fields = NULL,
  exclude_patterns = NULL,
  datasource = 1,
  logPath = NULL
)
}
\arguments{
\item{hub}{Character. Base URL of the Experiment Hub.}

\item{dataType}{Character vector or NULL. Filter for specific parameter types (e.g., "WaterLevel"). Default is NULL (no filtering).}

\item{return_fields}{Character vector or NULL. Fields to include in the output. Default includes station name, number, river, catchment, latitude, longitude, and parameter type.}

\item{exclude_patterns}{Character vector or NULL. Patterns to exclude stations by `station_name`. Default is NULL.}

\item{datasource}{Integer. Data source ID for the hub query. Default is 1.}

\item{logPath}{Character or NULL. Path to a directory for logging SSL errors during URL retrieval. Default is NULL (no logging).}
}
\value{
A data.frame containing metadata for KIWIS stations.  
  Includes a `heading` column with HTML-formatted station information.
}
\description{
This function fetches metadata for stations from a KIWIS Experiment Hub.
Users can specify which fields to return, filter by data type, and exclude certain stations by pattern.
}
\details{
The function constructs a URL query to the Experiment Hub using the specified fields and filters.
Data is retrieved using `safe_curl()` to handle SSL issues. The first row of the returned JSON
is used as column names. Filtering by `dataType` and exclusion patterns is applied after data retrieval.
The `heading` column is generated for convenient HTML display.
}
\examples{
\dontrun{
# Fetch all stations from the hub
meta <- get_kiwis_meta("http://kiwis.kisters.de/KiWIS/KiWIS", datasource = 0)

# Fetch only water level stations, excluding certain station names
meta_filtered <- get_kiwis_meta(
  "http://kiwis.kisters.de/KiWIS/KiWIS",
  datasource=0,
  dataType = "Precip",
  exclude_patterns = c("Zwiesel", "Test")
)
}

}
